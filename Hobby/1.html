<!DOCTYPE html>
<html>

<head>
  <title>KONOSUBA -An Explosion on This Wonderful World!</title>
  <link rel="stylesheet" href="../css/player.css">
  <script src='../lib/Anime4K.js'></script>
</head>

<body onload="onLoad();">

  <div id=input>
    <button onclick="toggleCanvas()">Disable Anime4K</button>
  </div>

  <div id="vilos"></div>

  <script type="text/javascript" src="https://static.crunchyroll.com/vilos-v2/web/vilos/js/bundle.js"
    charset="utf-8"></script>
  <script>
    toggleCanvas();
    function toggleCanvas() {
      const canvas = document.querySelector('canvas');
      canvas.style.display = canvas.style.display === 'none' ? '' : 'none';
      const button = document.querySelector('button');
      button.textContent = canvas.style.display === 'none' ? 'Enable Anime4K' : 'Disable Anime4K';
    }
    window.onload = function () {
      onLoad("../video/1.mp4");
    };

    function onLoad(videoPath) {
      fetch(videoPath)
        .then(response => response.blob())
        .then(blob => {
          const reader = new FileReader();
          reader.onload = function (e) {
            let src = e.target.result;
            changeVideo(src);
          };
          reader.readAsDataURL(blob);
        })
        .catch(error => {
          console.error("Error loading video:", error);
        });
    }

    function changeVideo(src) {
      const player0 = document.getElementById('player0');
      player0.src = src;
    }
  </script>

</body>

</html>